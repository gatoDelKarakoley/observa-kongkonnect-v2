# Nginx Proxy Protocol Configuration - Layer 4 IP Preservation
# Use when HTTP headers are not sufficient or for TCP/non-HTTP traffic

events {
    worker_connections 1024;
}

stream {
    upstream kong {
        server kong-dp-kong-proxy.kong.svc.cluster.local:80;
    }

    server {
        listen 80;
        
        # Enable Proxy Protocol to send real IP at TCP level
        proxy_pass kong;
        proxy_protocol on;
    }
}
